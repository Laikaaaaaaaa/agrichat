<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Test Chat History</title>
</head>
<body>
    <h1>Test Chat History Storage</h1>
    <div id="output"></div>
    
    <script>
    const output = document.getElementById('output');
    
    // Test localStorage
    try {
        // Read existing data
        const stored = localStorage.getItem('agrisense_chat_history');
        output.innerHTML += '<h2>Stored Data:</h2>';
        
        if (stored) {
            const conversations = JSON.parse(stored);
            output.innerHTML += `<p>Found ${conversations.length} conversations</p>`;
            output.innerHTML += '<pre>' + JSON.stringify(conversations, null, 2) + '</pre>';
        } else {
            output.innerHTML += '<p>No conversations found in localStorage</p>';
        }
        
        // Test write
        output.innerHTML += '<h2>Testing Write:</h2>';
        localStorage.setItem('test_key', 'test_value');
        const testRead = localStorage.getItem('test_key');
        output.innerHTML += `<p>Write test: ${testRead === 'test_value' ? 'SUCCESS' : 'FAILED'}</p>`;
        
    } catch (error) {
        output.innerHTML += `<p style="color: red;">Error: ${error.message}</p>`;
    }
    </script>
</body>
</html>